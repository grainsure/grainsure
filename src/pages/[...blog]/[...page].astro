---
import type { InferGetStaticPropsType, GetStaticPaths } from 'astro';

import Layout from '~/layouts/PageLayout.astro';
import BlogList from '~/components/blog/List.astro';
import Headline from '~/components/blog/Headline.astro';
import Pagination from '~/components/blog/Pagination.astro';
// import PostTags from "~/components/blog/Tags.astro";

import { blogListRobots, getStaticPathsBlogList } from '~/utils/blog';

export const prerender = true;

export const getStaticPaths = (async ({ paginate }) => {
  return await getStaticPathsBlogList({ paginate });
}) satisfies GetStaticPaths;

type Props = InferGetStaticPropsType<typeof getStaticPaths>;

const { page } = Astro.props as Props;
const currentPage = page.currentPage ?? 1;

// const allCategories = await findCategories();
// const allTags = await findTags();

const metadata = {
  title: `Blog${currentPage > 1 ? ` — Page ${currentPage}` : ''}`,
  robots: {
    index: blogListRobots?.index && currentPage === 1,
    follow: blogListRobots?.follow,
  },
  openGraph: {
    type: 'blog',
  },
};
---

<Layout metadata={metadata}>
<section class="relative px-6 sm:px-6 py-12 sm:py-16 lg:py-20 mx-auto max-w-7xl overflow-hidden">
  <div class="absolute inset-0 bg-blue-50 dark:bg-slate-900 pointer-events-none -z-10" aria-hidden="true"></div>
  <div class="absolute inset-0 bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] [background-size:16px_16px] [mask-image:radial-gradient(ellipse_50%_50%_at_50%_50%,#000_70%,transparent_100%)] -z-10 opacity-30"></div>

  <div class="relative max-w-4xl mx-auto">
    <Headline
      subtitle="เจาะลึกเทคโนโลยีการวัดความชื้นและเทคนิคการจัดการเมล็ดพันธุ์ เพื่อลดการสูญเสียและยกระดับมาตรฐานผลผลิตทางการเกษตรอย่างยั่งยืน"
    >
      <span class="text-accent dark:text-white highlight">Grainsure Insights</span><br />
      <span class="bg-clip-text text-transparent bg-gradient-to-r from-primary to-blue-600 font-extrabold">
        คลังความรู้เพื่อเกษตรกรไทย
      </span>
    </Headline>

    <div class="mt-8">
      <BlogList posts={page.data} />
    </div>

    <div class="mt-10 border-t border-gray-200 dark:border-slate-700 pt-8">
      <Pagination prevUrl={page.url.prev} nextUrl={page.url.next} />
    </div>

    </div>
</section>
</Layout>
