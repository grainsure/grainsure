---
import Layout from '~/layouts/PageLayout.astro';
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';
import Image from '~/components/common/Image.astro';
import Headline from '~/components/ui/Headline.astro';

// Import ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
import Cert1 from '~/assets/images/cert-manufacture.jpg';
import Cert2 from '~/assets/images/cert-repair.jpg';
import Cert3 from '~/assets/images/cert-sale.jpg';
import Cert4 from '~/assets/images/cert-lab1.jpg';
import Cert5 from '~/assets/images/cert-lab2.jpg';

const metadata = {
  title: '‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡πÉ‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï',
};

const certificates = [
  { src: Cert1, alt: '‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏ú‡∏•‡∏¥‡∏ï (Manufacture)' },
  { src: Cert2, alt: '‡πÉ‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏ã‡πà‡∏≠‡∏° (Repair)' },
  { src: Cert3, alt: '‡πÉ‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏Ç‡∏≤‡∏¢ (Sale)' },
  { src: Cert4, alt: '‡∏ú‡∏•‡∏™‡∏≠‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö (Lab Report 1)' },
  { src: Cert5, alt: '‡∏ú‡∏•‡∏™‡∏≠‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö (Lab Report 2)' },
];
---

<Layout metadata={metadata}>
  
  {/* üëâ ‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏•‡πà‡∏™‡∏µ (Gradient Background) 
      ‡πÄ‡∏£‡∏≤‡πÉ‡∏™‡πà slot="bg" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ó‡∏£‡∏Å‡∏â‡∏≤‡∏Å‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ
      - from-blue-50: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏™‡∏µ‡∏ü‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏≤‡∏á‡∏°‡∏≤‡∏Å‡πÜ
      - to-white: ‡πÑ‡∏•‡πà‡∏•‡∏á‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß
  */}
  <WidgetWrapper id="certificates" isDark={false} containerClass="max-w-7xl relative">
    <fragment slot="bg">
      <div class="absolute inset-0 bg-gradient-to-b from-blue-50 to-white dark:from-slate-800 dark:to-slate-900 pointer-events-none" aria-hidden="true"></div>
    </fragment>
    
    {/* ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ */}
    <Headline
      title="‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ß‡∏≤‡∏á‡πÉ‡∏à‡πÑ‡∏î‡πâ"
      subtitle="‡πÉ‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡πÅ‡∏•‡∏∞‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢"
      classes={{ 
        container: 'mb-12',
        title: 'text-4xl md:text-5xl font-bold tracking-tighter font-heading',
        /* üëâ ‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà 3: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏µ‡∏™‡∏±‡∏ô‡πÉ‡∏´‡πâ Subtitle */
        subtitle: 'text-xl text-blue-600 dark:text-blue-400 opacity-80' 
      }}
    />

    {/* Grid Layout */}
    <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-6 px-4">
      {
        certificates.map((cert) => (
          <div 
            class="group relative cursor-pointer perspective-1000"
            onclick={`openModal('${cert.src.src}')`} 
          >
            {/* ‡∏ï‡∏±‡∏ß‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ 
                üëâ ‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏µ‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏ö‡∏ï‡∏≠‡∏ô Hover (group-hover:border-primary-500)
            */}
            <div class="relative w-full bg-white rounded-xl shadow-md transition-all duration-300 transform group-hover:-translate-y-2 group-hover:shadow-xl group-hover:rotate-1 border-2 border-transparent group-hover:border-primary-500 overflow-hidden ring-1 ring-gray-100 dark:ring-gray-700">
              
              {/* ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û */}
              <div class="aspect-[210/297] overflow-hidden relative">
                 {/* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏â‡∏≤‡∏Å‡∏´‡∏•‡∏±‡∏á‡πÉ‡∏´‡πâ‡∏£‡∏π‡∏õ‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏π‡∏õ‡∏Ç‡∏≤‡∏ß‡πÑ‡∏°‡πà‡∏à‡∏° */}
                <div class="absolute inset-0 bg-gray-50 dark:bg-slate-800"></div>
                <Image
                  src={cert.src}
                  alt={cert.alt}
                  class="w-full h-full object-cover relative z-10 transition-transform duration-700 group-hover:scale-105 p-2"
                  widths={[400]}
                />
              </div>

              {/* Overlay "‡∏Ç‡∏¢‡∏≤‡∏¢‡∏î‡∏π‡∏†‡∏≤‡∏û" - ‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏°‡∏µ‡∏™‡∏µ‡∏™‡∏±‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô */}
              <div class="absolute inset-0 bg-primary-900/20 group-hover:bg-primary-900/40 transition-all duration-300 flex items-end justify-center opacity-0 group-hover:opacity-100 pb-6">
                  <span class="bg-primary-600 text-white text-sm font-bold px-4 py-2 rounded-full shadow-lg transform translate-y-4 group-hover:translate-y-0 transition-all duration-300 flex items-center gap-2">
                      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-zoom-in w-5 h-5" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /><path d="M12 7l0 6" /><path d="M9 10l6 0" /></svg>
                      ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏î‡∏π‡∏†‡∏≤‡∏û
                  </span>
              </div>

            </div>

            {/* ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á - ‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏µ‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡∏Ç‡∏∂‡πâ‡∏ô */}
            <p class="mt-4 text-sm md:text-base font-bold text-center text-gray-700 group-hover:text-primary-700 transition-colors">
              {cert.alt}
            </p>
          </div>
        ))
      }
    </div>

    {/* Lightbox (‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏ã‡∏π‡∏°‡∏£‡∏π‡∏õ) */}
    <div id="imageModal" class="fixed inset-0 z-[9999] hidden bg-slate-900/95 backdrop-blur-md flex items-center justify-center p-4 transition-opacity duration-300 opacity-0" onclick="closeModal()">
      <button class="absolute top-5 right-5 text-white/80 hover:text-white text-4xl font-bold focus:outline-none transition-colors">&times;</button>
      <img id="modalImage" src="" alt="Certificate Full Size" class="max-h-[90vh] max-w-[95vw] object-contain rounded-lg shadow-2xl transform scale-95 transition-transform duration-300 border-4 border-white" />
      <p class="absolute bottom-5 text-white/70 text-sm font-medium">‡∏Å‡∏î‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏¥‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</p>
    </div>

  </WidgetWrapper>

  <script is:inline>
    function openModal(imageSrc) {
      const modal = document.getElementById('imageModal');
      const modalImg = document.getElementById('modalImage');
      modalImg.src = imageSrc;
      modal.classList.remove('hidden');
      // ‡∏•‡πá‡∏≠‡∏Å‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏´‡∏•‡∏±‡∏á
      document.body.style.overflow = 'hidden';
      setTimeout(() => {
        modal.classList.remove('opacity-0');
        modalImg.classList.remove('scale-95');
        modalImg.classList.add('scale-100');
      }, 10);
    }

    function closeModal() {
      const modal = document.getElementById('imageModal');
      const modalImg = document.getElementById('modalImage');
      modal.classList.add('opacity-0');
      modalImg.classList.remove('scale-100');
      modalImg.classList.add('scale-95');
      // ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏´‡∏•‡∏±‡∏á
      document.body.style.overflow = 'auto';
      setTimeout(() => {
        modal.classList.add('hidden');
        modalImg.src = ''; 
      }, 300);
    }
  </script>

</Layout>